<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Song Lyrics</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Tabs */
    .tabs {
      display: flex;
      justify-content: center;
      gap: 0.2rem;
      border-bottom: 1px solid #e0e0e0;
      background: #fafafa;
      margin: 0.8rem 0;
      padding: 0.2rem;
    }

    .tab-btn {
      background: none;
      border: none;
      padding: 0.6rem 0.9rem;
      cursor: pointer;
      font-size: 0.95rem;
      border-radius: 6px 6px 0 0;
      transition: background 0.15s, color 0.15s;
    }

    .tab-btn:hover {
      background: #f0f0f0;
    }

    .tab-btn.active {
      background: white;
      color: #4a6fa5;
      font-weight: 700;
      box-shadow: 0 -2px 0 0 #4a6fa5 inset;
    }

    .tab-content {
      display: none;
      padding: 1rem;
      background: white;
      margin-bottom: 1rem;
      border-radius: 0 6px 6px 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    .tab-content pre {
      white-space: pre-wrap; /* preserves line breaks and spaces */
      font-family: monospace; /* ensures alignment */
      background: #fafafa;
      padding: 0.6rem;
      border-radius: 6px;
      border: 1px solid #eee;
      line-height: 1.5;
    }


    .tab-content.active {
      display: block;
    }

    /* small headings inside tab content */
    .tab-content h2 {
      margin-top: 0;
      margin-bottom: 0.6rem;
      font-size: 1.05rem;
      color: #333;
    }

    /* audio player spacing */
    .audio-wrap {
      text-align: center;
      margin: 0.6rem 0;
    }

    /* chords monospace */
    .chords pre {
      white-space: pre-wrap;
      font-family: monospace;
      background: #fafafa;
      padding: 0.6rem;
      border-radius: 6px;
      border: 1px solid #eee;
    }

    /* Keep header appearance consistent with your index */
    .site-header {
      background: rgb(0, 3, 66);
      color: #ab0000;
      padding: 0.8rem;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: center; /* centers title + back link */
      position: relative;
    }

    .site-header .logo {
      position: absolute;
      left: 0.8rem;
      width: 50px;
      height: 50px;
      object-fit: contain;
    }

    .header-text {
      text-align: center; /* centers back link + song title */
    }

    .back-link {
      text-decoration: none;
      color: #ffd700;
      font-size: 0.95rem;
      display: block;
      margin-bottom: 0.15rem;
    }

    #song-title {
      font-size: 1.25rem;
      margin: 0;
      color: #fff; /* looks good on dark background */
    }

    #song-altTitle {
      font-size: 1rem;
      color: #ccc;
      margin: 0;
      font-weight: normal;
    }

    @media (max-width: 600px) {
      .site-header .logo {
        width: 40px;
        height: 40px;
      }
      #song-title {
        font-size: 1rem;
      }
      #song-altTitle {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="header-top">
      <img src="logo.png" alt="Church Logo" class="logo">
      <div class="header-text">
        <!-- Back link above song title -->
        <a href="index.html" class="back-link">‚Üê Back to Song List</a>
        <h1 id="song-title"></h1>
        <h2 id="song-altTitle"></h2>
      </div>
    </div>
  </header>

  <!-- Tabs -->
  <div class="tabs" id="tabs">
    <button class="tab-btn active" data-tab="telugu">Telugu Lyrics</button>
    <button class="tab-btn" data-tab="english">English Lyrics</button>
    <button class="tab-btn" data-tab="audio">Audio</button>
    <button class="tab-btn" data-tab="chords">Chords</button>
  </div>

  <!-- MAIN: tab contents -->
  <main id="lyrics">
    <div id="tab-telugu" class="tab-content active"></div>
    <div id="tab-english" class="tab-content"></div>
    <div id="tab-audio" class="tab-content">
      <div class="audio-wrap">
        <p>üéµ No audio available for this song.</p>
      </div>
    </div>
    <div id="tab-chords" class="tab-content chords">
      <p>üé∏ No chords available for this song.</p>
    </div>
  </main>
  
  <!-- FOOTER -->
  <footer class="site-footer">
    <p>¬© 2025 R.J Global Ministries , NGYOI - New Gospel Youth of India Church | Built with Grace of GOD .</p>
    <p><a href="https://example.com" target="_blank">Visit our website</a></p>
  </footer>

  <!-- load data first -->
  <script src="data.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // preserve the original id-parsing approach
      const params = new URLSearchParams(window.location.search);
      const songId = params.get("id");
      const id = songId ? parseInt(songId, 10) : null;

      // DOM refs
      const titleEl = document.getElementById("song-title");
      const altTitleEl = document.getElementById("song-altTitle");
      const tabTelugu = document.getElementById("tab-telugu");
      const tabEnglish = document.getElementById("tab-english");
      const tabAudio = document.getElementById("tab-audio");
      const tabChords = document.getElementById("tab-chords");
      const tabsContainer = document.getElementById("tabs");
      const tabButtons = document.querySelectorAll(".tab-btn");

      // find song (data.js must define `songs` array)
      const song = (typeof songs !== "undefined") ? songs.find(s => s.id === id) : null;

      if (!song) {
        titleEl.textContent = "Song not found";
        altTitleEl.textContent = "";
        // hide tabs and show the original message in main area
        tabsContainer.style.display = "none";
        tabTelugu.classList.add("active");
        tabTelugu.innerHTML = "<p>Sorry ‚Äî that song id doesn't exist.</p>";
        // clear other sections
        tabEnglish.innerHTML = "";
        tabAudio.innerHTML = "";
        tabChords.innerHTML = "";
        return;
      }

      // set title (and altTitle if present)
      titleEl.textContent = `${song.id}. ${song.title}`;
      altTitleEl.textContent = song.altTitle ? song.altTitle : "";

      // fill Telugu lyrics
      if (Array.isArray(song.lyrics) && song.lyrics.length) {
        tabTelugu.innerHTML = "<h2>Telugu</h2><pre>" + song.lyrics.join("\n") + "</pre>";
      } else if (song.lyrics && typeof song.lyrics === "string") {
        tabTelugu.innerHTML = "<h2>Telugu</h2><pre>" + song.lyrics + "</pre>";
      } else {
        tabTelugu.innerHTML = "<p>No Telugu lyrics available.</p>";
      }


            // fill English transliteration
      if (Array.isArray(song.englishLyrics) && song.englishLyrics.length) {
        tabEnglish.innerHTML = "<h2>English</h2><pre>" + song.englishLyrics.join("\n") + "</pre>";
      } else if (song.englishLyrics && typeof song.englishLyrics === "string") {
        tabEnglish.innerHTML = "<h2>English</h2><pre>" + song.englishLyrics + "</pre>";
      } else {
        tabEnglish.innerHTML = "<p>No English transliteration available.</p>";
      }


      // Audio (optional)
      if (song.audio && typeof song.audio === "string") {
        tabAudio.innerHTML = `
          <div class="audio-wrap">
            <audio controls src="${song.audio}">Your browser does not support the audio element.</audio>
          </div>
        `;
      } else {
        tabAudio.innerHTML = `<div class="audio-wrap"><p>üéµ No audio available for this song.</p></div>`;
      }

      // Chords (optional)
      if (song.chords) {
        if (Array.isArray(song.chords)) {
          tabChords.innerHTML = "<h2>Chords</h2><pre>" + song.chords.join("\n") + "</pre>";
        } else {
          tabChords.innerHTML = "<h2>Chords</h2><pre>" + String(song.chords) + "</pre>";
        }
      } else {
        tabChords.innerHTML = "<p>üé∏ No chords available for this song.</p>";
      }

      // Tab switching logic
      tabButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          tabButtons.forEach(b => b.classList.remove("active"));
          document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));

          btn.classList.add("active");
          const tabId = "tab-" + btn.dataset.tab;
          const content = document.getElementById(tabId);
          if (content) content.classList.add("active");
        });
      });
    });
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>

